var INPUT_SHORTCUT_TYPES=["button","text","submit","color","url","password","hidden","file","number","email","reset","date","checkbox","select","radio"];function bootpopup(t){if(!(this instanceof bootpopup))return new bootpopup(t);var b=this;this.formid="bootpopup-form"+String(Math.random()).substr(2),this.options={title:document.title,showclose:!0,size:"normal",size_labels:"col-sm-4",size_inputs:"col-sm-8",content:[],onsubmit:"close",buttons:["close"],before:function(){},dismiss:function(){},close:function(){},ok:function(){},cancel:function(){},yes:function(){},no:function(){},complete:function(){},submit:function(t){return b.callback(b.options.onsubmit,t),!1}},this.addOptions=function(t){var o,i=[];for(o in t)o in this.options&&(this.options[o]=t[o]),0<=["close","ok","cancel","yes","no"].indexOf(o)&&i.push(o);return 0<i.length&&("buttons"in t||(this.options.buttons=[]),i.forEach(function(t){b.options.buttons.indexOf(t)<0&&b.options.buttons.push(t)})),"string"!=typeof t.onsubmit&&(0<this.options.buttons.indexOf("close")?this.options.onsubmit="close":0<this.options.buttons.indexOf("ok")?this.options.onsubmit="ok":0<this.options.buttons.indexOf("yes")&&(this.options.onsubmit="yes")),this.options},this.setOptions=function(t){return this.options=t,this.options},this.create=function(){var t,o,i="modal-dialog";for(t in"large"==this.options.size&&(i+=" modal-lg"),"small"==this.options.size&&(i+=" modal-sm"),this.modal=$('<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="bootpopup-title"></div>'),this.dialog=$("<div></div>",{class:i,role:"document"}),this.content=$('<div class="modal-content"></div>'),this.dialog.append(this.content),this.modal.append(this.dialog),this.header=$('<div class="modal-header"></div>'),this.options.showclose&&this.header.append('<button type="button" class="bootpopup-button close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),this.header.append('<h4 class="modal-title" id="bootpopup-title">'+this.options.title+"</h4>"),this.content.append(this.header),this.body=$('<div class="modal-body"></div>'),this.form=$("<form></form>",{id:this.formid,class:"form-horizontal",submit:function(t){return b.options.submit(t)}}),this.body.append(this.form),this.content.append(this.body),this.options.content){var s=this.options.content[t];switch(typeof s){case"string":this.form.append(s);break;case"object":for(var n in s){var e,a,p=s[n];for(e in p)"function"==typeof p[e]&&(p[e]="("+p[e]+")(this)");if(0<=INPUT_SHORTCUT_TYPES.indexOf(n)&&(p.type=n,n="input"),"input"==n){switch("checkbox"===p.type&&void 0===p.class&&(p.class=""),p.id=void 0===p.id?"bootpopup-input"+String(Math.random()).substr(2):p.id,p.class=void 0===p.class?"form-control":p.class,p.type=void 0===p.type?"text":p.type,p.type){case"checkbox":a=$('<div class="checkbox"></div>').append($("<label></label>").append($("<input />",p)).append(p.label)),p.label="";break;case"select":for(var c in a=$("<select></select>",p),p.options)a.append($("<option></option>",{value:c}).append(p.options[c]));break;case"radio":for(var c in a=[],p.options)a.push($('<div class="radio"></div>',p).append($("<label></label>").append($("<input />",{type:"radio",name:p.name,value:c})).append(p.options[c])));break;default:a=$("<input />",p)}var l=$('<div class="form-group"></div>').appendTo(this.form),r=($("<label></label>",{for:p.id,class:"control-label "+this.options.size_labels,text:p.label}).appendTo(l),$("<div></div>",{class:this.options.size_inputs}));r.append(a),l.append(r)}else this.form.append($("<"+n+"></"+n+">",p))}break;default:throw"Invalid entry type"}}for(o in this.footer=$('<div class="modal-footer"></div>'),this.content.append(this.footer),this.options.buttons){var d=this.options.buttons[o],u="",h="";switch(d){case"close":u="btn-primary",h="Close";break;case"ok":u="btn-primary",h="OK";break;case"cancel":u="btn-default",h="Cancel";break;case"yes":u="btn-primary",h="Yes";break;case"no":u="btn-default",h="No"}var f=$("<button></button>",{type:"button",text:h,class:"btn "+u,"data-dismiss":"modal","data-callback":d,"data-form":this.formid,click:function(t){var o=$(t.target).data("callback");b.callback(o,t)}});switch(this.footer.append(f),d){case"close":this.btnClose=f;break;case"ok":this.btnOk=f;break;case"cancel":this.btnCancel=f;break;case"yes":this.btnYes=f;break;case"no":this.btnNo=f}}this.modal.on("hide.bs.modal",this.options.dismiss),this.modal.on("hidden.bs.modal",function(t){b.options.complete(t),b.modal.remove()}),!1===this.options.showclose&&this.modal.attr("data-backdrop","static"),$(document.body).append(this.modal)},this.show=function(){this.options.before(this),this.modal.modal()},this.data=function(){var t,o={},i=this.form.serializeArray();for(t in i){var s=i[t].name,n=i[t].value;void 0===o[s]?o[s]=n:(Array.isArray(o[s])||(o[s]=[o[s]]),o[s].push(n))}return o},this.callback=function(t,o){var i,t=this.options[t];if("function"==typeof t)return i=this.form.serializeArray(),t=t(this.data(),i,o),this.modal.modal("hide"),t},this.dismiss=function(){this.callback("dismiss")},this.submit=function(){this.callback("submit")},this.close=function(){this.callback("close")},this.ok=function(){this.callback("ok")},this.cancel=function(){this.callback("cancel")},this.yes=function(){this.callback("yes")},this.no=function(){this.callback("no")},this.addOptions(t),this.create(),this.show()}bootpopup.alert=function(t,o,i){return"function"==typeof o&&(i=o),"string"!=typeof o&&(o=document.title),"function"!=typeof i&&(i=function(){}),bootpopup({title:o,content:[{p:{text:t}}],dismiss:function(){i()}})},bootpopup.confirm=function(t,o,i){"function"==typeof o&&(i=o),"string"!=typeof o&&(o=document.title),"function"!=typeof i&&(i=function(){});var s=!1;return bootpopup({title:o,showclose:!1,content:[{p:{text:t}}],buttons:["no","yes"],yes:function(){s=!0},dismiss:function(){i(s)}})},bootpopup.prompt=function(t,o,i,s,n){var e,a="function"==typeof n?n:"function"==typeof s?s:"function"==typeof i?i:"function"==typeof o?o:function(){},p=("object"==typeof t&&(s=i,i=o,o=null),"string"!=typeof i&&(i="Please, provide values for:"),"string"!=typeof s&&(s=document.title),[{p:{text:i}}]);return"object"==typeof t?t.forEach(function(t){var o="string"==typeof t?t:null;null!==t&&"object"==typeof t&&"string"==typeof t.label&&("string"!=typeof t.name&&(t.name=t.label.toLowerCase().replace(/\s+/g,"-")),"string"!=typeof t.type&&(t.type="text"),o={input:t}),null!==o&&p.push(o)}):(p.push({input:{type:o="string"!=typeof o?"text":o,name:"value",label:t}}),e=a,a=function(t){e(t.value)}),bootpopup({title:s,content:p,buttons:["cancel","ok"],ok:function(t){a(t)}})},"function"==typeof define&&define(["jquery","bootstrap"],function(){return bootpopup});
